
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
        
        <title>温故而知新，触类而旁通</title>

    
    <meta name="author" content="">
    <meta name="keywords" content="温故而知新，触类而旁通">
    <meta name="baidu-site-verification" content="MPWwBNOzay" />

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/liuyiyou/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/liuyiyou/css/style.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

	<script type="text/javascript" src = "/assets/themes/liuyiyou/SyntaxHighlighter/shCore.js"></script>
	<script type="text/javascript" src = "/assets/themes/liuyiyou/SyntaxHighlighter/shBrushJava.js"></script>
	<script type="text/javascript" src = "/assets/themes/liuyiyou/SyntaxHighlighter/shBrushXml.js"></script>
    <link href="/assets/themes/liuyiyou/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" media="all">
    	
	<script type="text/javascript">
        SyntaxHighlighter.all();
    </script>
  </head>

  <body id="post-index">
    <div id="navbar" class="navbar navbar-static-top navbar-blue navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">liuyiyou</a>
          <ul class="nav">
            
            
            


   
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">归档</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">分类</a></li>
      	
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/project.html">项目</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">标签</a></li>
      	
      
    
  



			<li class="divider-vertical"></li>

            
            
            


   
  
    
  
    
      
      	
      	<li><a href="/about.html">关于我</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



            <li><a href="http://blog.liuyiyou.cn">Lofter</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div id="main">

        



  <div class="article hentry">
  <div class="header">
      <h1 class="entry-title"><a href="/2014/07/30/spring-mapping-adapter" rel="bookmark" title="Spring的Mapping和Adapter的原理 " itemprop="url">Spring的Mapping和Adapter的原理 </a></h1>
    
  </div>
  <div class="entry-content">
   

<p>目的：</p>
<p>该项目通过运行一个最简单的Spring-mvc项目，来分析Spring-mvc的流程，尽量做到配置最少，为了更加了解运行过程，不使用注解，而是使用2.5时候的方式。</p>
<p>之前用过了无数次Spring-mvc也了解过其中的运行原理，但是都是看别人的代码，自己只是偶尔浏览偶尔记忆，但是别人的始终是别人的，不自己试一遍终究了解得不深刻，也许别人某个角落里面的一句话你会常常忽略，直到解决了某个困惑了自己很久的问题才发现原来别人已经说了，只是你没有看到。所以我自己也分析了一下。</p>

<p>一般的过程是：</p>
<ul>
    <li>在web.xml中配置DispatchServlet</li>
    <li>HandlerMapping配置请求到处理器的映射</li>
    <li>HandlerAdapter配置，从而支持多种类型的处理器</li>
    <li>ViewResolver配置，从而将逻辑视图名解析为具体视图技术</li>
    <li>处理器配置：即Controler配置</li>
</ul>
<p>其中，HandlerMapping,HandlerAdapter,ViewResolver都使用默认的实现，刚开始，我们不配置，来看看默认实现</p>



  </div>
   <div class="read-more2">
      <a href="/2014/07/30/spring-mapping-adapter"  title="Spring的Mapping和Adapter的原理 " >阅读全文 </a>
   </div>
  <!-- /.entry-content -->
</div>


      

  <div class="article hentry">
  <div class="header">
      <h1 class="entry-title"><a href="/2014/07/26/spring-validator" rel="bookmark" title="Spring验证详解 " itemprop="url">Spring验证详解 </a></h1>
    
  </div>
  <div class="entry-content">
   

<p>目标：
Spring自带的验证方式
基于JSR303的验证
国际化显示错误信息
一：使用Spring自带的验证方式
       该种方式相对来说麻烦一点，需要为每个需要验证的实体类编写一个验证类，不过好处是可以处理多字段组合验证以及业务逻辑等复杂验证</p>

<p>1.1：定义实体类（User）</p>

<pre class="brush: java;">

public class User {

    private String username;

    private String nickname;

    private String password;

   //省略getter /setter
}

</pre>

<p>1.2:定义实体类验证类（UserValidator）
需要继承Validator接口</p>

<pre class="brush: java;">

public class UserValidator implements Validator {

    @Override
    public boolean supports(Class&lt;?&gt; clazz) {
        return User.class.equals(clazz); 
    }

public void validate(Object target, Errors errors) {
       User user = (User)target;
        if(StringUtils.isEmpty(user.getUsername())){
            //1:使用这种方式，会报错(No message found under code 'empty.user.username.user.username' for locale 'zh_CN'.)，因为rejectValue的第二个参数都是errorcode
            //errors.rejectValue("username","empty.user.username");
            //errors.rejectValue("username","用户名不能为空");

            //2:正确用法：rejectValue(String filed,String errorcode,Object[] errorArgs,String defaultMessage)
            errors.rejectValue("username","empty.user.username","用户名不能为空Default");

            //使用该种方式，不需要配置ResourceBundleMessageSource
           // ValidationUtils.rejectIfEmpty(errors,"username","empty.user.username","用户名不能为空");
        } else {
           int length =  user.getUsername().length();
            if(length&lt;=3){
                errors.rejectValue("username","min.length.user.username","用户名长度不能小于3Default");
            }else if (length&gt;=6){
                errors.rejectValue("username","max.length.user.username","用户名不能大于6Default");
            }

        }
        }

}
</pre>



  </div>
   <div class="read-more2">
      <a href="/2014/07/26/spring-validator"  title="Spring验证详解 " >阅读全文 </a>
   </div>
  <!-- /.entry-content -->
</div>


      

  <div class="article hentry">
  <div class="header">
      <h1 class="entry-title"><a href="/2014/07/26/idea-properties-mac-delete-soft" rel="bookmark" title="macbook air彻底删除文件以及dea关于属性文件中文乱码 " itemprop="url">macbook air彻底删除文件以及dea关于属性文件中文乱码 </a></h1>
    
  </div>
  <div class="entry-content">
   
<p>今天在使用idea编写代码的时候，在属性文件里面需要写中文，发现和eclipse中的不同，在eclipse中书写中文的时候，当回车的时候会自动转换成unicode编码，可是在idea中，.properties文件是中文的。这样在前台显示的时候出现了中文乱码。</p>

<p>刚开始以为是那个.properties插件的问题，就把那个插件禁用，这下可惨了，所有的properties文件都不高亮了，而且无法知道该属性是否在代码中被使用了（这一点ieda很牛逼，知道你哪个地方使用了属性文件里面的某个属性），只是已txt文件查看，而且无法恢复(比如xml文件make成txt文件之后有make as xml，这个却没有)</p>



  </div>
   <div class="read-more2">
      <a href="/2014/07/26/idea-properties-mac-delete-soft"  title="macbook air彻底删除文件以及dea关于属性文件中文乱码 " >阅读全文 </a>
   </div>
  <!-- /.entry-content -->
</div>


      

  <div class="article hentry">
  <div class="header">
      <h1 class="entry-title"><a href="/2014/06/30/spring-validator" rel="bookmark" title="Spring验证 " itemprop="url">Spring验证 </a></h1>
    
  </div>
  <div class="entry-content">
   
<p>在spring中，有三种不同的方式执行验证，基于注解，基于spring validator或者混合两种，并没有一种所谓的“最好的”的验证方式，但是也许有一种适合你！

Spring支持Bean Validation1.0(JSR-303)和Bean Validation1.1(JSR-349)，为了保持向前兼容，同时支持Spring validator接口。

<pre class="brush: java;">

	public class User{
	   private String name;
	   .....
	}
</pre>

###第一种：###
如果使用spring3.x和简单的验证，使用<code>javax.validation.constraints</code>注解。即jsr-303

<pre class="brush: java;">

	@NotNull
	public class User{
	   private String name;
	   .....
	}
</pre>
使用这种方式，需要一个实现了jsr303的库，比如Hibernate Validator。这样你可以在控制器中，这样写：

<pre class="brush: java;">

    public createUser(Model model, @Valid @ModelAttribute("user") User user, BindingResult result){
    if (result.hasErrors()){
      // do something
    }
    else {
      // do something else
    }
}
</pre>

**注意**  <code>@Valid</code> 如果user有一个空的name，<code>result.hasError()</code>将返回true。

</p>


  </div>
   <div class="read-more2">
      <a href="/2014/06/30/spring-validator"  title="Spring验证 " >阅读全文 </a>
   </div>
  <!-- /.entry-content -->
</div>


      

  <div class="article hentry">
  <div class="header">
      <h1 class="entry-title"><a href="/2014/06/28/lucence-index-build-and-search" rel="bookmark" title="Lucence索引的建立和搜索 " itemprop="url">Lucence索引的建立和搜索 </a></h1>
    
  </div>
  <div class="entry-content">
   

<h3 id="section">建立索引的步骤</h3>
<ol>
  <li>创建Directory</li>
  <li>创建IndexWriter</li>
  <li>创建Document对象（表）</li>
  <li>为Document添加Field(表的字段)</li>
  <li>通过IndexWriter添加文档到索引中</li>
</ol>

<pre class="brush: java;">
     /**
     * 建立索引
     * 
     * @throws ParseException
     * @throws IOException
     */
    public void index() {
        IndexWriter writer = null;
        try {
            // 1:创建Directory
            // Directory directory = new RANDirecotry();//索引建立在内存中
            // 创建在硬盘上。根据当前环境打开一个合理的索引位置。
            Directory directory = FSDirectory
                    .open(new File("F:/lucene/index01"));
            // 2:创建IndexWriter
            IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_35,
                    new StandardAnalyzer(Version.LUCENE_35));
            writer = new IndexWriter(directory, config);
            // 3:Document对象（表）
            Document doc = null;

</pre>


  </div>
   <div class="read-more2">
      <a href="/2014/06/28/lucence-index-build-and-search"  title="Lucence索引的建立和搜索 " >阅读全文 </a>
   </div>
  <!-- /.entry-content -->
</div>


      

  <div class="article hentry">
  <div class="header">
      <h1 class="entry-title"><a href="/2014/06/27/lucence-index-curd" rel="bookmark" title="Lucence对索引进行增删改查 " itemprop="url">Lucence对索引进行增删改查 </a></h1>
    
  </div>
  <div class="entry-content">
   

<h3 id="filedindex">Filed.index(索引选项)</h3>
<ul>
  <li>Index.ANALYZED：进行分词和索引，适用用于标题和内容</li>
  <li>Index.NOT_ANALYZED:不进行分词，进行索引，如果身份证号码，姓名，id等，适用于精确搜索</li>
  <li>Index&gt;ANALYZED_NOT_NORNS：进行分词但是不存储norms信息。这个norms中包括了创建索引的时间和权值信息</li>
  <li>Index.NOT_NOT_ANALYZED_NOT_NORMS:即不进行分词也不存储norms信息 Index.NO:不进行索引</li>
</ul>



  </div>
   <div class="read-more2">
      <a href="/2014/06/27/lucence-index-curd"  title="Lucence对索引进行增删改查 " >阅读全文 </a>
   </div>
  <!-- /.entry-content -->
</div>


      

<!-- Pagination links -->







    </div>
	   
	<div class="footer-wrapper">
		<footer>
        <p>&copy; 2014 
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>
	  
	 </div>
    
  </body>
</html>

